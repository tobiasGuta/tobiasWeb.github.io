<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>üõ°Ô∏è Threat Intelligence Dashboard üõ°Ô∏è</title>
    <meta name="author" content="Gerard King">
    <meta name="description" content="Cybersecurity Threat Intelligence Dashboard aggregating feeds from 108 sources, built for real-time monitoring and analysis.">
    <meta name="keywords" content="Cybersecurity, Threat Intelligence, RSS Feeds, Execution Policy, PowerShell, Gerard King, Red Team, Security">
    <meta name="theme-color" content="#1c1c1c">
    <meta name="website" content="www.gerardking.dev">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="icon" href="favicon-16x16.png" type="image/x-icon"></link>

    <div class="feed-container" id="feedContainer">
        <!-- RSS feed content will be dynamically loaded here -->
    </div>

        <script>
        const feedContainer = document.getElementById('feedContainer');
        const rssFeeds = [
                "https://www.theguardian.com/technology/data-protection/rss",
                "https://epic.org/feed/",
                "https://techcrunch.com/category/privacy/feed/",
                "https://restoreprivacy.com/feed/",
                "https://proton.me/blog/feed",
                "https://tuta.com/blog/feed.xml",
                "https://www.privacyguides.org/articles/feed_rss_created.xml",
                "https://blog.torproject.org/feed",
                "https://www.stationx.net/feed/",

        ];                

        let latestTitle = ''; // To store the latest feed title

        async function fetchFeeds() {
            const allItems = [];
            const seenTitles = new Set();
    
            const fetchPromises = rssFeeds.map(async (feed) => {
                try {
                    const response = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(feed)}`);
                    const data = await response.json();
    
                    if (data.status === 'ok') {
                        data.items.forEach(item => {
                            if (!seenTitles.has(item.title)) {
                                seenTitles.add(item.title);
                                allItems.push(item);
                            }
                        });
                    }
                } catch (error) {
                    console.error('Error fetching feed:', feed, error);
                }
            });
    
            await Promise.all(fetchPromises);
    
            // Sort all items by publication date (newest first)
            allItems.sort((a, b) => new Date(b.pubDate) - new Date(a.pubDate));
    
            // Check for updates
            if (allItems.length > 0 && allItems[0].title !== latestTitle) {
                if (latestTitle) { // Avoid pop-up on the first load
                    showNotification(allItems[0].title);
                }
                latestTitle = allItems[0].title; // Update the latest title
            }
    
            // Clear existing feed content
            feedContainer.innerHTML = '';
    
            // Add feed items to the container
            allItems.forEach(item => {
                const feedItem = document.createElement('div');
                feedItem.className = 'feed-item';
                feedItem.innerHTML = `
                    
                    <div class="header">
                        <h2><a href="${item.link}" target="_blank" class="blog-title">${item.title}</a></h2>
                        <span class="badge">${item.pubDate}</span>
                    </div>
                    <p>${item.description.substring(0, 550)}...</p>
                    <a href="${item.link}" target="_blank"><br>Read more</a>
                `;
    
                feedContainer.appendChild(feedItem);
            });
        }
    
    
        // Set interval for automatic refresh (every 10 minutes)
        const refreshInterval = setInterval(fetchFeeds, 600000);
    
        // Fetch feeds on initial load and on every refresh interval
        document.addEventListener('DOMContentLoaded', () => {
            fetchFeeds();
        });
    
        // Clear the interval on unload (e.g., when the user leaves the page)
        window.addEventListener('unload', () => {
            clearInterval(refreshInterval);
        });

    </script>

</body>

</html>